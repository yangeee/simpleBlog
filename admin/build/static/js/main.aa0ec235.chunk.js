(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{151:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},187:function(e,t,a){},193:function(e,t,a){"use strict";a.r(t);var c,n=a(0),s=a(26),r=a.n(s),i=a(117),j=a(24),d=a(27),l=(a(150),a(140)),o=a(135),b=a(199),O=a(201),h=a(36),u=a(204),x=a(106),p=(a(151),a(49)),m=a.n(p),g={checkLogin:(c="https://yang.plus/api/admin/")+"checkLogin",getTypeInfo:c+"getTypeInfo",addArticle:c+"addArticle",updateArticle:c+"updateArticle",getArticleList:c+"getArticleList",getArticleById:c+"getArticleById/",delArticle:c+"delArticle/"},f=a(6);var v=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(""),i=Object(d.a)(r,2),j=i[0],p=i[1],v=Object(n.useState)(!1),y=Object(d.a)(v,2),A=y[0],I=y[1];return Object(f.jsx)("div",{className:"login-div",children:Object(f.jsx)(o.a,{tip:"Loading...",spinning:A,children:Object(f.jsxs)(b.a,{title:"s1mple Blog System",bordered:!0,style:{width:400},children:[Object(f.jsx)(O.a,{id:"userName",size:"large",placeholder:"Enter your userName",prefix:Object(f.jsx)(u.a,{className:"site-form-item-icon"}),onChange:function(e){s(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(O.a.Password,{id:"password",size:"large",placeholder:"Enter your password",prefix:Object(f.jsx)(x.a,{}),onChange:function(e){p(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(h.a,{type:"primary",size:"large",block:!0,onClick:function(){if(I(!0),!c)return l.b.error("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"),setTimeout((function(){I(!1)}),500),!1;if(!j)return l.b.error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),setTimeout((function(){I(!1)}),500),!1;var t={userName:c,password:j};m()({method:"post",url:g.checkLogin,data:t,withCredentials:!0}).then((function(t){I(!1),"\u767b\u5f55\u6210\u529f"===t.data.data?(localStorage.setItem("openId",t.data.openId),e.history.push("/index")):l.b.error("\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef")})),setTimeout((function(){I(!1)}),1e3)},children:" Login in "})]})})})},y=a(197),A=a(120),I=a(203),w=a(205),C=a(206),S=a(207),k=(a(184),a(67)),N=a.n(k),L=(a(185),a(83)),T=a(77),_=a(45),z=a(198),E=L.a.Option,B=O.a.TextArea;var H=function(e){Object(n.useEffect)((function(){ie();var t=e.match.params.id;t&&(s(t),re(t))}),[]);var t=Object(n.useState)(0),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(""),i=Object(d.a)(r,2),j=i[0],o=i[1],b=Object(n.useState)(""),u=Object(d.a)(b,2),x=u[0],p=u[1],v=Object(n.useState)("\u9884\u89c8\u5185\u5bb9"),y=Object(d.a)(v,2),A=y[0],I=y[1],w=Object(n.useState)(),C=Object(d.a)(w,2),S=C[0],k=C[1],H=Object(n.useState)("\u7b49\u5f85\u7f16\u8f91"),M=Object(d.a)(H,2),P=M[0],J=M[1],K=Object(n.useState)(),D=Object(d.a)(K,2),F=D[0],R=D[1],q=Object(n.useState)(),G=Object(d.a)(q,2),Q=(G[0],G[1],Object(n.useState)([])),U=Object(d.a)(Q,2),V=U[0],W=U[1],X=Object(n.useState)(0),Y=Object(d.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)("\u8bf7\u9009\u62e9\u7c7b\u522b"),te=Object(d.a)(ee,2),ae=te[0],ce=te[1];N.a.setOptions({renderer:new N.a.Renderer,gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!1,smartLists:!0,smartypants:!1});var ne=function(e){p(e.target.value);var t=N()(e.target.value);I(t)},se=function(e){k(e.target.value);var t=N()(e.target.value);J(t)},re=function(e){m()(g.getArticleById+e,{withCredentials:!0,header:{"Access-Control-Allow-Origin":"*"}}).then((function(e){o(e.data.data[0].title),p(e.data.data[0].article_content);var t=N()(e.data.data[0].article_content);I(t),k(e.data.data[0].introduce);var a=N()(e.data.data[0].introduce);J(a),R(e.data.data[0].addTime),$(e.data.data[0].type_id);for(var c=0,n=V.length;c<n;c++)console.log(V[c].Id,Z),V[c].Id===Z&&(console.log(1111111111),ce(V[c].typeName))}))},ie=function(){m()({method:"get",url:g.getTypeInfo,header:{"Access-Control-Allow-Origin":"*"},withCredentials:!0}).then((function(t){"\u6ca1\u6709\u767b\u5f55"===t.data.data?e.history.push("/login"):W(t.data.data)}))};return Object(f.jsx)("div",{children:Object(f.jsxs)(T.a,{gutter:5,children:[Object(f.jsxs)(_.a,{span:18,children:[Object(f.jsxs)(T.a,{gutter:10,children:[Object(f.jsx)(_.a,{span:20,children:Object(f.jsx)(O.a,{placeholder:"\u535a\u5ba2\u6807\u9898",size:"large",value:j,onChange:function(e){o(e.target.value)}})}),Object(f.jsxs)(_.a,{span:4,children:["\xa0",Object(f.jsx)(L.a,{value:ae,size:"large",onChange:function(e){$(e)},children:V.map((function(e,t){return Object(f.jsx)(E,{value:e.Id,children:e.typeName},e.Id)}))})]})]}),Object(f.jsx)("br",{}),Object(f.jsxs)(T.a,{gutter:10,children:[Object(f.jsx)(_.a,{span:12,children:Object(f.jsx)(B,{value:x,className:"markdown-content",rows:35,onChange:ne,onPressEnter:ne,placeholder:"\u6587\u7ae0\u5185\u5bb9"})}),Object(f.jsx)(_.a,{span:12,children:Object(f.jsx)("div",{className:"show-html",dangerouslySetInnerHTML:{__html:A}})})]})]}),Object(f.jsx)(_.a,{span:6,children:Object(f.jsxs)(T.a,{children:[Object(f.jsxs)(_.a,{span:24,children:[Object(f.jsx)(h.a,{size:"large",children:"\u6682\u5b58\u6587\u7ae0"}),"\xa0",Object(f.jsx)(h.a,{type:"primary",size:"large",onClick:function(){if(!Z)return l.b.error("\u5fc5\u987b\u9009\u62e9\u6587\u7ae0\u7c7b\u522b"),!1;if(!j)return l.b.error("\u6587\u7ae0\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!x)return l.b.error("\u6587\u7ae0\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!S)return l.b.error("\u7b80\u4ecb\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!F)return l.b.error("\u53d1\u5e03\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a"),!1;var e={};e.type_id=Z,e.title=j,e.article_content=x,e.introduce=S;var t=F.replace("-","/");e.addTime=new Date(t).getTime()/1e3,0===c?(console.log("articleId=:"+c),e.view_count=Math.ceil(100*Math.random())+1e3,m()({method:"post",url:g.addArticle,data:e,withCredentials:!0}).then((function(e){s(e.data.insertId),e.data.isSuccess?l.b.success("\u6587\u7ae0\u4fdd\u5b58\u6210\u529f"):l.b.error("\u6587\u7ae0\u4fdd\u5b58\u5931\u8d25")}))):(e.id=c,m()({method:"post",url:g.updateArticle,header:{"Access-Control-Allow-Origin":"*"},data:e,withCredentials:!0}).then((function(e){e.data.isSuccess?l.b.success("\u6587\u7ae0\u4fdd\u5b58\u6210\u529f"):l.b.error("\u4fdd\u5b58\u5931\u8d25")})))},children:"\u53d1\u5e03\u6587\u7ae0"}),Object(f.jsx)("br",{})]}),Object(f.jsxs)(_.a,{span:24,children:[Object(f.jsx)("br",{}),Object(f.jsx)(B,{rows:4,value:S,onChange:se,onPressEnter:se,placeholder:"\u6587\u7ae0\u7b80\u4ecb"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"introduce-html",dangerouslySetInnerHTML:{__html:"\u6587\u7ae0\u7b80\u4ecb\uff1a"+P}})]}),Object(f.jsx)(_.a,{span:12,children:Object(f.jsx)("div",{className:"date-select",children:Object(f.jsx)(z.a,{onChange:function(e,t){return R(t)},placeholder:"\u53d1\u5e03\u65e5\u671f",size:"large"})})})]})})]})})},M=(a(187),a(202)),P=a(200),J=M.a.confirm;var K=function(e){Object(n.useEffect)((function(){r()}),[]);var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],s=a[1],r=function(){m()({method:"get",url:g.getArticleList,withCredentials:!0,header:{"Access-Control-Allow-Origin":"*"}}).then((function(e){s(e.data.list)}))};return Object(f.jsx)("div",{children:Object(f.jsx)(P.b,{header:Object(f.jsxs)(T.a,{className:"list-div",children:[Object(f.jsx)(_.a,{span:8,children:Object(f.jsx)("b",{children:"\u6807\u9898"})}),Object(f.jsx)(_.a,{span:3,children:Object(f.jsx)("b",{children:"\u7c7b\u522b"})}),Object(f.jsx)(_.a,{span:3,children:Object(f.jsx)("b",{children:"\u53d1\u5e03\u65f6\u95f4"})}),Object(f.jsx)(_.a,{span:3,children:Object(f.jsx)("b",{children:"\u96c6\u6570"})}),Object(f.jsx)(_.a,{span:3,children:Object(f.jsx)("b",{children:"\u6d4f\u89c8\u91cf"})}),Object(f.jsx)(_.a,{span:4,children:Object(f.jsx)("b",{children:"\u64cd\u4f5c"})})]}),bordered:!0,dataSource:c,renderItem:function(t){return Object(f.jsx)(P.b.Item,{children:Object(f.jsxs)(T.a,{className:"list-div",children:[Object(f.jsx)(_.a,{span:8,children:t.title}),Object(f.jsx)(_.a,{span:3,children:t.typeName}),Object(f.jsx)(_.a,{span:3,children:t.addTime}),Object(f.jsxs)(_.a,{span:3,children:["\u5171",Object(f.jsx)("span",{children:t.part_count}),"\u96c6"]}),Object(f.jsx)(_.a,{span:3,children:t.view_count}),Object(f.jsxs)(_.a,{span:4,children:[Object(f.jsx)(h.a,{type:"primary",onClick:function(){var a;a=t.id,e.history.push("/index/add/"+a)},children:"\u4fee\u6539"}),"\xa0",Object(f.jsx)(h.a,{onClick:function(){var e;e=t.id,J({title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u7bc7\u535a\u5ba2\u6587\u7ae0\u5417?",content:"\u5982\u679c\u4f60\u70b9\u51fbOK\u6309\u94ae\uff0c\u6587\u7ae0\u5c06\u4f1a\u6c38\u8fdc\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u6062\u590d\u3002",onOk:function(){m()(g.delArticle+e,{withCredentials:!0}).then((function(e){l.b.success("\u6587\u7ae0\u5220\u9664\u6210\u529f"),r()}))},onCancel:function(){l.b.success("\u6ca1\u6709\u4efb\u4f55\u6539\u53d8")}})},children:"\u5220\u9664"})]})]})})}})})},D=y.a.Header,F=y.a.Content,R=y.a.Footer,q=y.a.Sider,G=A.a.SubMenu;var Q=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],s=a[1];return Object(f.jsxs)(y.a,{style:{minHeight:"100vh"},className:"layout-container",children:[Object(f.jsxs)(q,{collapsible:!0,collapsed:c,onCollapse:function(e){s(e)},children:[Object(f.jsx)("div",{className:"logo"}),Object(f.jsxs)(A.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(f.jsxs)(A.a.Item,{children:[Object(f.jsx)(w.a,{}),Object(f.jsx)("span",{children:"\u5de5\u4f5c\u53f0"})]},"1"),Object(f.jsxs)(A.a.Item,{children:[Object(f.jsx)(C.a,{}),Object(f.jsx)("span",{children:"\u6dfb\u52a0\u6587\u7ae0"})]},"2"),Object(f.jsxs)(G,{onClick:function(t){console.log(t.item.props),"addArticle"===t.key?e.history.push("/index/add"):e.history.push("/index/list")},title:Object(f.jsxs)("span",{children:[Object(f.jsx)(u.a,{}),Object(f.jsx)("span",{children:"\u6587\u7ae0\u7ba1\u7406"})]}),children:[Object(f.jsx)(A.a.Item,{children:"\u6dfb\u52a0\u6587\u7ae0"},"addArticle"),Object(f.jsx)(A.a.Item,{children:"\u6587\u7ae0\u5217\u8868"},"articleList")]},"sub1"),Object(f.jsxs)(A.a.Item,{children:[Object(f.jsx)(S.a,{}),Object(f.jsx)("span",{children:"\u7559\u8a00\u7ba1\u7406"})]},"9")]})]}),Object(f.jsxs)(y.a,{children:[Object(f.jsx)(D,{style:{background:"#fff",padding:0}}),Object(f.jsxs)(F,{style:{margin:"0 16px"},children:[Object(f.jsxs)(I.a,{style:{margin:"16px 0"},children:[Object(f.jsx)(I.a.Item,{children:"\u540e\u53f0\u7ba1\u7406"}),Object(f.jsx)(I.a.Item,{children:"\u5de5\u4f5c\u53f0"})]}),Object(f.jsx)("div",{style:{padding:24,background:"#fff",minHeight:360},children:Object(f.jsxs)("div",{children:[Object(f.jsx)(j.a,{path:"/index/",exact:!0,component:H}),Object(f.jsx)(j.a,{path:"/index/add",exact:!0,component:H}),Object(f.jsx)(j.a,{path:"/index/add/:id",exact:!0,component:H}),Object(f.jsx)(j.a,{path:"/index/list",component:K})]})})]}),Object(f.jsx)(R,{style:{textAlign:"center"},children:"simpleLike.com"})]})]})};var U=function(){return Object(f.jsxs)(i.a,{basename:"/admin",children:[Object(f.jsx)(j.a,{path:"/login/",exact:!0,component:v}),Object(f.jsx)(j.a,{path:"/index/",component:Q})]})};r.a.render(Object(f.jsx)(U,{}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.aa0ec235.chunk.js.map